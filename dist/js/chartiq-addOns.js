(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,i){"use strict";var a=i(0);let s=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Animation=t.Animation||function(e){if(!e)throw new Error("Invalid constructor arguments.");var i,a,s;if(e instanceof t.ChartEngine?(i=arguments[0],a=arguments[1],s=arguments[2]):(i=e.stx,a=e.animationParameters,s=e.easeMachine),!i)return console.warn("No CIQ.ChartEngine provided. Cannot properly create CIQ.Animation instance");var r={stayPut:!1,ticksFromEdgeOfScreen:5,granularity:1e6};a=t.extend(r,a),r.tension&&(i.chart.tension=a.tension),i.tickAnimator=s||new t.EaseMachine(Math.easeOutCubic,1e3);var n=new t.EaseMachine(Math.easeInOutCubic,1e3),o=["#0298d3","#19bcfc","#5dcffc","#9ee3ff"],l=0,h=20,c=0,d=!1,u=null;function m(){d=!1,u=null}i.addEventListener(["symbolChange","layout"],(function(e){m()})),i.prepend("updateCurrentMarketData",(function(e,t,i,a){t||(t=this.chart),a&&a.fromTrade&&(t.closePendingAnimation||0===t.closePendingAnimation)&&(a.finalClose=t.closePendingAnimation)})),i.prepend("updateChartData",(function(e,i,s){var r=this;if(i||(i=r.chart),i&&i.defaultChartStyleConfig&&"none"!=i.defaultChartStyleConfig&&(void 0===s||!s.animationEntry&&!s.secondarySeries)&&i.dataSegment){var n=r.tickAnimator,o=this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation;if(o){if(!n)return void console.warn("Animation plug-in can not run because the tickAnimator has not been declared. See instructions in animation.js");if(this.prevSymbol!=i.symbol&&(this.prevQuote=0,i.closePendingAnimation=null,this.prevSymbol=i.symbol),D(),n.stop(),e.length>2)return}var l=t.clone(s);l||(l={}),l.animationEntry=!0,l.bypassGovernor=!0,l.noCreateDataSet=!1,l.appending=!0,l.firstLoop=!0;var h=this.chart.symbol,c=this.layout.periodicity,m=this.layout.interval,p=this.layout.timeUnit;if(o){var f=e[e.length-1];this.prevQuote=this.currentQuote();var v=!1,x=!1;if(1==c&&2==e.length){this.prevQuote=e[0];var g=i.dataSet.length;L(this.prevQuote),g==i.dataSet.length&&(x=!0)}if(!(f&&f.Close&&this.prevQuote&&this.prevQuote.Close))return!1;if(this.extendedHours&&i.market.market_def){var y=f.DT;if(t.ChartEngine.isDailyInterval(m))d=!i.market.isMarketDate(y);else if(!u||u<=y){var C=i.market.getSession(y);d=!(""===C||this.layout.marketSessions&&this.layout.marketSessions[C]),u=i.market[d?"getNextOpen":"getNextClose"](y)}if(d)return this.draw(),!1}var S=c;"second"==m||"second"==p?S*=1e3:"minute"!=m&&"minute"!=p||(S*=6e4),isNaN(m)||(S*=m),v="day"==m||"day"==p?f.DT.getDate()!=this.prevQuote.DT.getDate():"week"==m||"week"==p?f.DT.getDate()>=this.prevQuote.DT.getDate()+7:"month"==m||"month"==p?f.DT.getMonth()!=this.prevQuote.DT.getMonth():f.DT.getTime()>=this.prevQuote.DT.getTime()+S;var k=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,b=0;if(v){if(!this.animations.zoom.hasCompleted)return!1;var w=this.layout.candleWidth;if(i.scroll<=i.maxTicks)for(;this.micropixels>0;)i.scroll++,this.micropixels-=w;i.scroll<=i.maxTicks?(this.previousMicroPixels=this.micropixels,this.nextMicroPixels=this.micropixels+w,b=-1*w,i.dataSegment.length<i.maxTicks-a.ticksFromEdgeOfScreen&&!a.stayPut&&(this.nextMicroPixels=this.micropixels,i.scroll++),i.animatingHorizontalScroll=k,i.previousDataSetLength=i.dataSet.length):x||i.scroll++}i.closePendingAnimation=f.Close;var T=v&&!k?f.Open:this.prevQuote.Close;return n.run(function(e,s,o){return function(d){var u=d.Close;if(!i.dataSet.length||h!=i.symbol||c!=r.layout.periodicity||m!=r.layout.interval||p!=r.layout.timeUnit)return n.stop(),void D();var f=t.clone(e);f.Adj_Close=null,f.Close=Math.round(u*a.granularity)/a.granularity,o?(f.Open||0===f.Open||(f.Open=f.Close),f.High||0===f.High||(f.High=Math.max(f.Open,f.Close)),f.Low||0===f.Low||(f.Low=Math.min(f.Open,f.Close))):(e.Close>s.High&&(f.High=f.Close),e.Close<s.Low&&(f.Low=f.Close)),i.animatingHorizontalScroll&&(r.micropixels=d.micropixels,i.lastTickOffset=d.lineOffset),l.updateDataSegmentInPlace=!n.hasCompleted;var v=[f];o&&"tick"!==r.layout.interval&&v.unshift(s),r.updateChartData(v,i,l),l.firstLoop=!1,n.hasCompleted&&D()}}(f,t.clone(this.prevQuote),v),{Close:T,micropixels:this.nextMicroPixels,lineOffset:b},{Close:f.Close,micropixels:this.micropixels,lineOffset:0}),!0}}function L(e){if(i.masterData)for(var t=i.masterData.length-1;t>=0;t--){var a=i.masterData[t];if(a.Close||0===a.Close)return a.Close=e.Close,e.LastSize&&(a.LastSize=e.LastSize),e.LastTime&&(a.LastTime=e.LastTime),r.updateCurrentMarketData({Close:a.Close,DT:a.DT,LastSize:a.LastSize,LastTime:a.LastTime}),void r.createDataSet(null,null,{appending:!0})}}function D(){if(i.animatingHorizontalScroll&&(i.animatingHorizontalScroll=!1,r.micropixels=r.nextMicroPixels=r.previousMicroPixels,i.lastTickOffset=0),null!==i.closePendingAnimation){var e=i.closePendingAnimation;i.closePendingAnimation=null,L({Close:e})}}})),i.prepend("renderYAxis",(function(e){if(!this.grabbingScreen&&this.isHome()&&(this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation)){var i=e.panel.yAxis;if(!t.Comparison||i.priceFormatter!=t.Comparison.priceFormat)if(e.prevLowValue||0===e.prevLowValue||(e.prevLowValue=e.animatedLow=e.lowValue),e.prevHighValue||0===e.prevHighValue||(e.prevHighValue=e.animatedHigh=e.highValue),n.running||(e.animatingVerticalScroll=!1),e.prevLowValue>=e.lowValue&&e.prevHighValue<=e.highValue)e.animatingVerticalScroll&&(i.highValue=e.animatedHigh,i.lowValue=e.animatedLow);else if(n.running&&n.stop(),e.lowValue||e.highValue){var a,s=e.prevLowValue,r=e.prevHighValue;e.prevLowValue=e.lowValue,e.prevHighValue=e.highValue,e.animatingVerticalScroll=!0,n.run((a=this,function(t){e.animatedLow=t.low,e.animatedHigh=t.high,a.draw()}),{low:s,high:r},{low:e.lowValue,high:e.highValue}),i.lowValue=e.animatedLow,i.highValue=e.animatedHigh}}})),i.append("draw",(function(){if(!d&&this.chart.dataSet&&this.chart.dataSet.length&&this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation){c%h==0&&(l++,c=0),c++;var e=this.chart.context,t=this.chart.panel,i=this.currentQuote();if(!i)return;var a=i.Close,s=this.pixelFromTick(i.tick,this.chart);this.chart.lastTickOffset&&(s+=this.chart.lastTickOffset);var r=this.pixelFromPrice(a,t);this.chart.yAxis.left>s&&this.chart.yAxis.top<=r&&this.chart.yAxis.bottom>=r&&(l>=o.length&&(l=0),e.beginPath(),e.moveTo(s,r),e.arc(s,r,2+1.07*l,0,2*Math.PI,!1),e.fillStyle=o[l],e.fill())}}))}},r=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.ContinuousZoom=t.ContinuousZoom||function(e){this.update(e),this.stx.continuousZoom=this,this.addSmartZoomButton=function(){var e,t=this.stx.registerChartControl&&this.stx.registerChartControl("stx-smart-zoom","SmartZoom",(e=this,function(t){e.smartZoomToggle(t),t.stopPropagation()}));t&&(this.stx.addEventListener("layout",(function(e){!0===e.stx.layout.smartzoom?t.classList.add("active"):t.classList.remove("active")})),this.stx.addEventListener("symbolImport",(function(e){!1===e.stx.layout.smartzoom&&t.classList.remove("active")})))},this.smartZoomToggle=function(e){this.smartZoomEnable(!this.stx.layout.smartzoom)},this.smartZoomEnable=function(e){this.stx.layout.smartzoom=e,this.stx.changeOccurred("layout")},this.addSmartZoomButton(),this.smartZoomEnable(!0)},t.ContinuousZoom.prototype.update=function(e){e||(e={}),this.stx=e.stx,this.periodicities=e.periodicities,this.boundaries=e.boundaries},t.ContinuousZoom.prototype.execute=function(e){function t(e){var t=e.period||e.periodicity,i=e.interval,a=e.timeUnit||"minute";switch(isNaN(i)&&(a=i,i=1),a){case"month":i*=4.35;case"week":i*=7;case"day":i*=1440;case"minute":i*=60;case"second":break;case"millisecond":i/=1e3;break;default:return null}return t*i}if(this.stx&&this.stx.layout.smartzoom){var i=this.periodicities,a=this.boundaries,s=this.stx,r=s.layout,n=s.chart;if(i&&a&&(!e&&a.maxCandleWidth&&r.candleWidth>a.maxCandleWidth||e&&a.minCandleWidth&&r.candleWidth<a.minCandleWidth||!e&&a.minTicks&&n.maxTicks<a.minTicks||e&&a.maxTicks&&n.maxTicks>a.maxTicks)){for(var o={value:e?Number.MAX_VALUE:0},l=t(r),h=0;h<i.length;h++){var c=t(i[h]);(c>l&&c<o.value&&e||c<l&&c>o.value&&!e)&&(o={value:c,periodicity:i[h]})}var d=o.periodicity;d&&s.setRange({dtLeft:n.xaxis[0].DT,dtRight:n.xaxis[n.xaxis.length-1].DT,dontSaveRangeToLayout:!0,periodicity:d})}}}},n=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.ExtendedHours=t.ExtendedHours||function(e){var i=e.stx;this.filter=e.filter,i||(i=e,this.filter=!1);var a={};this.stx=i,this.stx.extendedHours=this;const s=(e.menuContextClass&&"."+e.menuContextClass||"body")+" .extendedhours-ui";t.addInternalStylesheet(s+" { display: inherit }",s),i.addEventListener("theme",(function(e){for(var t in a={},i.layout.marketSessions)a.session||(a.session={}),a.session[t]=i.canvasStyle("stx_market_session "+t)})),i.addEventListener("symbolChange",(function(e){"master"!=e.action||!i.layout.extended||i.chart.market.market_def&&i.chart.market.sessions.length||t.alert("There are no Extended Hours for this instrument.")})),this.prepare=function(e,t){for(var s in i.layout.extended=e,i.layout.marketSessions)a.session={},i.chart.market.disableSession(s);if(i.layout.marketSessions={},e)if(t||(t=["pre","post"]),t.length)for(var r=0;r<t.length;r++)i.layout.marketSessions[t[r]]=!0;else i.layout.marketSessions=t;for(s in i.layout.marketSessions)a.session||(a.session={}),a.session[s]=i.canvasStyle("stx_market_session "+s),i.chart.market.disableSession(s,!0)},this.complete=function(e){i.changeOccurred("layout"),i.chart.market.market_def?this.filter?(i.createDataSet(),i.draw(),e&&e()):i.loadChart(i.chart.symbol,e):e&&e()},this.set=function(e,t,i){this.prepare(e,t),this.complete(i)},this.stx.append("drawYAxis",(function(e,s){if(this.layout.extended&&e.yAxis==s.yAxis&&!1!==e.shareChartXAxis&&!e.hidden){var r=e.chart;if(!t.ChartEngine.isDailyInterval(this.layout.interval)&&(a.divider=this.canvasStyle("stx_market_session divider"),a.session)){for(var n,o,l=r.market,h=[],c={},d=0;d<r.dataSegment.length;d++){var u=r.dataSegment[d];if(u&&u.DT){var m=null;if(l.market_def)if(!n||n<=u.DT)o=l.getSession(u.DT),n=l[!(""===o||this.layout.marketSessions&&this.layout.marketSessions[o])?"getNextOpen":"getNextClose"](u.DT);var p=a.session[o];if(p&&(m=p.backgroundColor),c.color&&c.color!=m&&(h.push({start:c.start,end:c.end,color:c.color}),c={}),m){var f=this.layout.candleWidth;u.candleWidth&&(f=u.candleWidth),c.end=this.pixelFromBar(d,r)+f/2,c.start||0===c.start||(c.start=c.end-f+1),c.color=m}else c={}}}(c.start||0===c.start)&&h.push({start:c.start,end:c.end,color:c.color});var v=t.isTransparent(a.divider.backgroundColor),x=a.divider.width.replace(/px/g,""),g={y0:e.bottom,y1:e.top,color:a.divider.backgroundColor,type:"line",context:r.context,confineToPanel:e,pattern:"dashed",lineWidth:x,deferStroke:!0};for(this.startClip(e.name),r.context.beginPath(),i.highlightedDraggable&&(r.context.globalAlpha*=.3),d=0;d<h.length;d++)r.context.fillStyle=h[d].color,!v&&h[d].start>r.left&&this.plotLine(t.extend({x0:h[d].start,x1:h[d].start},g)),r.context.fillRect(h[d].start,e.top,h[d].end-h[d].start,e.bottom-e.top),!v&&h[d].end<r.right&&this.plotLine(t.extend({x0:h[d].end,x1:h[d].end},g));r.context.stroke(),this.endClip()}}}))}},o=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.FullScreen=t.FullScreen||function(e){e||(e={}),e.stx?(this.stx=e.stx,this.stx.fullScreen=this,this.fullScreenButton=null,this.fullScreenState=!1,this.addFullScreenButton=function(){var e;this.stx.registerChartControl&&(this.fullScreenButton=this.stx.registerChartControl("stx-full-screen","Full Screen",(e=this,function(t){e.fullScreenToggle(t),t.stopPropagation()})))},this.fullScreenToggle=function(e){document.documentElement.requestFullscreen||document.documentElement.webkitRequestFullscreen||document.documentElement.mozRequestFullscreen||document.documentElement.msRequestFullscreen?this.getFullScreenElement()?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.mozRequestFullscreen?document.documentElement.mozRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen():(this.fullScreenState=!this.fullScreenState,this.fullScreenRender())},this.fullScreenRender=function(){var e=null;(e=t.findClosestParent(this.stx.container,"*[cq-context], cq-context, body"))&&(!0===this.fullScreenState?(this.fullScreenButton&&this.fullScreenButton.classList.add("active"),e.classList.add("full-screen")):(this.fullScreenButton&&this.fullScreenButton.classList.remove("active"),e.classList.remove("full-screen")),window.dispatchEvent(new Event("resize")))},this.onFullScreenChange=function(){this.getFullScreenElement()?this.fullScreenState=!0:this.fullScreenState=!1,this.fullScreenRender()},this.getFullScreenElement=function(){return document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement},document.addEventListener("fullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("webkitfullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("mozfullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("MSFullscreenChange",this.onFullScreenChange.bind(this),!1),this.addFullScreenButton()):console.warn("The Full Screen addon requires an stx parameter")}},l=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.InactivityTimer=t.InactivityTimer||function(e){var t;e.minutes&&((!e.interval||e.interval<0)&&(e.interval=60),this.stx=e.stx,this.timeout=e.minutes,this.interval=e.interval,this.wakeCB=e.wakeCB,this.sleepCB=e.sleepCB,this.sleepTimer=null,this.sleeping=!1,this.last=(new Date).getTime(),this.wakeChart=function(){clearTimeout(this.sleepTimer),this.last=(new Date).getTime(),this.sleeping&&(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(),this.sleeping=!1,document.body.classList.remove("ciq-sleeping")),this.sleepTimer=setTimeout(this.sleepChart.bind(this),6e4*this.timeout),this.wakeCB&&this.wakeCB()},this.sleepChart=function(){this.sleeping||(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(this.interval),this.sleeping=!0,document.body.classList.add("ciq-sleeping")),this.sleepCB&&this.sleepCB()},$(document).on("mousemove mousedown touchstart touchmove pointerdown pointermove keydown wheel",$("body"),(t=this,function(e){t.wakeChart()})),this.wakeChart())}},h=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Outliers=t.Outliers||function(e){if(e||(e={}),!e.stx)return void console.warn("The Outliers addon requires an stx parameter");Array.isArray(e.altColors)||(e.altColors=["#323390","#66308f","#0073ba","#f4932f","#0056a4","#00a99c","#00a553","#ea1d2c","#e9088c","#fff126","#912a8e","#ee652e","#00afed","#8ec648"]),this.stx=e.stx,this.stx.outliers=this,this.multiplier=e.multiplier||3,this.altColors=e.altColors,this.axisData={},this.stx.addEventListener("layout",(function(e){Object.keys(e.stx.outliers.axisData).forEach(function(e){this.removeAllMarkers(this.axisData[e]),delete this.axisData[e]}.bind(e.stx.outliers))}));const i=(e.menuContextClass&&"."+e.menuContextClass||"body")+" .outliers-ui";t.addInternalStylesheet(i+" { display: inherit }",i),this.processDataSet=function(e,t,i){if(!e.length||e.length<=1)return!1;var a=[0,0];if(!this.axisData[i.name]){var s="",r=-1;Object.keys(this.axisData).forEach(function(e){this.axisData[e].panel.name==t.name&&r++}.bind(this)),r>-1&&r<this.altColors.length&&(s=this.altColors[r]),this.axisData[i.name]={axis:i,panel:t,displayState:"none",isFlipped:!1,originalZoom:i.zoom,markerColor:s,markers:{},axisMarkers:{}}}var n=this.axisData[i.name];return Object.assign(n,this.find(e)),this.refreshMarkerArray(n),this.refreshMarkers(n),"low"!==n.displayState&&"all"!==n.displayState||null===n.outlierMin?a[0]=n.trendMin:a[0]=n.outlierMin,"high"!==n.displayState&&"all"!==n.displayState||null===n.outlierMax?a[1]=n.trendMax:a[1]=n.outlierMax,a},this.find=function(e){if(e.length&&!(e.length<=0)){var t,i,a=function(e,t){return{quote:e.quote,DT:e.quote.DT,value:e.value,position:t}},s=null,r=null,n=null,o=null,l=[],h=e.slice();h.sort((function(e,t){return e.value-t.value}));var c=h.length,d=h[Math.floor(c/4)].value,u=h[Math.floor(c*(3/4))].value,m=u-d;t=d-m*this.multiplier,i=u+m*this.multiplier;for(var p=0;p<c;p++){var f=h[p],v=h[c-(p+1)];if(f.value<=t&&l.push(a(f,"low")),v.value>=i&&l.push(a(v,"high")),null===n&&f.value<=t&&(n=f.value),null===o&&v.value>=i&&(o=v.value),null===s&&f.value>t&&(s=f.value),null===r&&v.value<i&&(r=v.value),null!==s&&null!==r)break}return{minValue:t,maxValue:i,trendMin:s,trendMax:r,outlierMin:n,outlierMax:o,activeOutliers:l}}},this.refreshMarkerArray=function(e){this.deprecateMarkers(e);var t=e.markers;e.activeOutliers.forEach(function(i){var a=i.DT.getTime().toString();t[a]||(t[a]={isFresh:!0,type:"quote",value:i.value,marker:this.markOutlier(i,i.position,e)}),t[a].isFresh=!0}.bind(this)),null!==e.outlierMax&&(t.axisHigh||(t.axisHigh={isFresh:!0,type:"axis",value:e.outlierMax,marker:this.markAxis("high",e)}),t.axisHigh.isFresh=!0),null!==e.outlierMin&&(t.axisLow||(t.axisLow={isFresh:!0,type:"axis",value:e.outlierMin,marker:this.markAxis("low",e)}),t.axisLow.isFresh=!0)},this.setDisplayState=function(e,t){"high"!=e&&"low"!=e&&"all"!=e&&(e="none");var i=e;"all"==t.displayState&&"high"==e?i="low":"all"==t.displayState&&"low"==e?i="high":"high"==t.displayState&&"low"==e||"low"==t.displayState&&"high"==e?i="all":t.displayState==e&&(i="none"),t.displayState=i,t.axis.zoom=t.originalZoom,this.refreshMarkers(t),this.stx.draw()},this.deprecateMarkers=function(e){Object.keys(e.markers).forEach(function(e){var t;(t=this.markers[e]).marker&&!t.isFresh?(t.marker.remove&&t.marker.remove(),t.marker=null):t.isFresh=!1,this.markers[e].marker||delete this.markers[e]}.bind(e))},this.removeAllMarkers=function(e){Object.keys(e.markers).forEach((function(t){var i=e.markers[t].marker;i&&(i.remove&&i.remove(),i=null),i||delete e.markers[t]}))},this.updateMarkerVisibility=function(){Object.keys(this.markers).forEach(function(e){"all"==this.displayState||this.markers[e].marker.node.classList.contains(this.displayState)?this.markers[e].marker.node.style.display="none":this.markers[e].marker.node.style.display="block"}.bind(this))},this.refreshAxisMarkers=function(e,t){var i=!1;e.classList.contains("high")&&(i=!0);var a=t.axis.top;(!t.isFlipped&&!i||t.isFlipped&&i)&&(a=t.axis.bottom-50),e.classList.contains("nano")&&(a=t.axis.top+t.axis.height/2-22);var s=Math.floor(t.axis.left).toString()+"px",r=Math.floor(a).toString()+"px",n=i?t.outlierMax:t.outlierMin;e.style.transform="translate("+s+", "+r+")",e.querySelector(".outlier-value").innerText=this.stx.formatYAxisPrice(n),"0px"===s?e.classList.add("right"):e.classList.remove("right")},this.refreshMarkers=function(e){Object.keys(e.markers).forEach(function(e,t){var i=e.markers[t].marker,a=e.markers[t].value,s=e.markers[t].type;a>e.trendMax&&e.axis.high>=a||a<e.trendMin&&e.axis.low<=a?"quote"==s?i.node.style.display="none":"axis"==s&&i.node.classList.add("compress"):"quote"==s?i.node.style.display="block":"axis"==s&&i.node.classList.remove("compress"),"axis"==s&&this.refreshAxisMarkers(i.node,e),e.axis.height<100?i.node.classList.add("nano"):i.node.classList.remove("nano"),e.axis.height<250?i.node.classList.add("micro"):i.node.classList.remove("micro")}.bind(this,e)),e.isFlipped!==e.axis.flipped&&this.flipMarkers(e)},this.markAxis=function(e,i){var a=document.createElement("div");a.classList.add("outlier-sticker","axis","mini",e),a.innerHTML='<div class="expansion"><div class="pill"><div class="icon"></div></div><div class="tick"></div><span class="outlier-value"></div><div class="compression"><div class="pill"><div class="icon"></div></div></div></span>',this.matchYAxisStyle(a),this.setMarkerColor(a,i.markerColor);var s=this.handleMarkerClick.bind(this,e,i,a);return a.addEventListener("click",s),a.addEventListener("touchend",s),new t.Marker({stx:this.stx,xPositioner:"none",yPositioner:"none",label:"expand",permanent:!0,chartContainer:!0,node:a})},this.markOutlier=function(e,i,a){if(e){a||(a={panel:this.stx.panels.chart}),i=i||"high";var s=document.createElement("div");s.classList.add("outlier-sticker","quote","mini",i),s.innerHTML='<div class="pill"><div class="icon"></div></div><span class="outlier-value">'+this.stx.formatYAxisPrice(e.value,a.panel)+"</span>",this.matchYAxisStyle(s),this.setMarkerColor(s,a.markerColor);var r=this.handleMarkerClick.bind(this,i,a,s);return s.addEventListener("click",r),s.addEventListener("touchend",r),new t.Marker({stx:this.stx,xPositioner:"date",yPositioner:"high"==i?"top":"bottom",x:e.quote.DT,panelName:a.panel.name,node:s})}},this.handleMarkerClick=function(e,t,i){i.classList.contains("nano")&&(e="all"),this.setDisplayState(e,t),this.stx.draw()},this.matchYAxisStyle=function(e){if(this.stx.styles.stx_yaxis){var t=this.stx.styles.stx_yaxis;e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.color=t.color,e.style.borderColor=t.color}},this.setMarkerColor=function(e,t){if(""!=t)for(var i=e.querySelectorAll(".pill"),a=0;a<i.length;a++)i[a].style.backgroundColor=t},this.flipMarkers=function(e){e.isFlipped=e.axis.flipped,Object.keys(e.markers).forEach(function(e,t){var i=e.markers[t].marker,a=e.markers[t].value,s=e.markers[t].type;e.isFlipped?i.node.classList.add("flipped"):i.node.classList.remove("flipped"),"quote"==s&&(a>e.trendMax?e.isFlipped?i.params.yPositioner="bottom":i.params.yPositioner="top":a<e.trendMin&&(e.isFlipped?i.params.yPositioner="top":i.params.yPositioner="bottom"))}.bind(this,e))};var a=t.ChartEngine.prototype.determineMinMax.bind(this.stx);t.ChartEngine.prototype.determineMinMax=function(e,t,i,s,r,n,o,l,h){return h||(h=[]),o&&l&&this.layout.outliers&&h.push(this.outliers.processDataSet.bind(this.outliers)),a(e,t,i,s,r,n,o,l,h)}}},c=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.PlotComplementer=t.PlotComplementer||function(e){var i=e.stx,a=t.uniqueID();e.decorator||(e.decorator={});var s=e.decorator.symbol||"_"+a,r=e.decorator.display||" (addl)";i.plotComplementers||(i.plotComplementers=[]),i.plotComplementers.push(this),this.id=e.id||a,this.defaultRenderingParameters={chartType:"line",width:1,opacity:.5},e.renderingParameters&&(this.defaultRenderingParameters=e.renderingParameters);var n=this;function o(i,a,o,l){if("err"!=function(t){if(t.quoteDriver&&e.quoteFeed){for(var i=0;i<t.quoteDriver.quoteFeeds.length;i++)if(t.quoteDriver.quoteFeeds[i].engine==e.quoteFeed)return;return"err"}}(i)&&(l||(l=a),!i.isEquationChart(a)&&(o||(o={}),!o.isComparison&&l&&-1==l.indexOf(s)))){var h=l+s,c=a+s,d=i.getRendererFromSeries(l),u=t.extend({display:a+r,name:h,symbol:c,symbolObject:{symbol:c,generator:n.id,masterSymbol:a},overChart:!1,gapDisplayStyle:!0,permanent:!0,panel:o.panel,yAxis:o.yAxis,shareYAxis:!0,loadData:!!n.quoteFeed,dependentOf:d?d.params.name:i.mainSeriesRenderer.params.name},n.renderingParameters);u.color||(u.color=o.color||"auto"),i.addSeries(h,u,(function(e,t){e&&i.removeSeries(h,i.chart),i.chart.seriesRenderers[h]&&(i.chart.seriesRenderers[h].params.display=u.display)}))}}function l(e,t,i){t&&-1==t.indexOf(s)&&e.removeSeries(t+s,i)}function h(e){"master"==e.action?(e.prevSymbol||(e.prevSymbol=e.symbol),l(e.stx,e.prevSymbol,e.stx.chart),o(e.stx,e.symbol)):"add-series"==e.action?(l(e.stx,e.id,e.stx.chart),o(e.stx,e.symbol,e.parameters,e.id)):"remove-series"==e.action&&l(e.stx,e.id,e.stx.chart)}i.addEventListener("symbolChange",h),i.addEventListener("symbolImport",h),this.resetRenderingParameters=function(){this.renderingParameters=this.defaultRenderingParameters},this.setQuoteFeed=function(e){if(e.quoteFeed&&e.behavior){var a=t.clone(e.behavior);a.generator=this.id;var s=e.filter;i.attachQuoteFeed(e.quoteFeed,a,(function(e){return!(s&&!s(e))&&e.symbolObject.generator==a.generator})),this.quoteFeed=e.quoteFeed}},this.setQuoteFeed(e),this.resetRenderingParameters()}},d=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.RangeSlider=t.RangeSlider||function(e){var i=e.stx;i.slider=this;var a=e.height?e.height:95,s=e.chartContainer?$(e.chartContainer):$(e.stx.container),r=$('<div class="ciq-chart"></div>'),n=$('<div class="chartContainer"></div>');r.insertAfter(s.parent()).append(n),r.css("height",a+"px").css("padding-top","5px").hide(),n.css("height","100%"),n.prop("dimensionlessCanvas",!0);var o=this.slider=new t.ChartEngine({container:n[0],preferences:{labels:!1,whitespace:0}});o.xaxisHeight=30,o.manageTouchAndMouse=!1,o.minimumCandleWidth=0,o.container.style.cursor="ew-resize";var l=o.chart.panel.yAxis;l.drawCurrentPriceLabel=!1,Object.defineProperty(l,"position",{get:function(){return i.slider.yAxisPosition||i.chart.panel.yAxis.position},set:function(e){i.slider.yAxisPosition=e}}),Object.defineProperty(l,"width",{get:function(){return 0===i.slider.yAxisWidth?0:i.slider.yAxisWidth||i.chart.panel.yAxis.width},set:function(e){i.slider.yAxisWidth=e}}),t.extend(l,e.yAxis),o.chart.baseline.userLevel=!1,o.controls.home&&(o.controls.home.style.width=0),o.initializeChart();var h=o.chart.panel.subholder;const c=(e.menuContextClass&&"."+e.menuContextClass||"body")+" .rangeslider-ui";t.addInternalStylesheet(c+" { display: inherit }",c),this.updateStyles=function(e,t,a){i.setStyle(e,t,a),this.style=i.canvasStyle("stx_range_slider shading")},this.display=function(e){if(i.layout.rangeSlider!==e)return i.layout.rangeSlider=e,void i.changeOccurred("layout");r[e?"show":"hide"](),i.resizeChart(),$(window).resize(),e&&(o.resizeChart(),o.initializeChart(),o.draw(),this.drawSlider())},this.setSymbol=function(e){o.chart.panel.display=o.chart.symbol=e,o.setMainSeriesRenderer(),o.resizeChart(),this.adjustRange(i.chart),o.draw(),this.drawSlider()},this.acceptLayoutChange=function(e){var a=!1;o.layout.rangeSlider!==e.rangeSlider&&i.slider.display(e.rangeSlider);["chartType","aggregationType","periodicity","interval","timeUnit","chartScale","rangeSlider","flipped","extended","marketSessions","kagi","rangebars","renko","priceLines","pandf"].forEach((function(i){t.equals(o.layout[i],e[i])||(o.layout[i]=e[i],a=!0)})),r.is(":visible")&&a&&(o.setMainSeriesRenderer(),o.draw(),this.drawSlider())},this.adjustRange=function(e){if(e.dataSet){var t=o.chart;if(t.width){var a=0,s=0;if(i.quoteDriver){var r={symbol:e.symbol,symbolObject:e.symbolObject,interval:i.layout.interval};"month"!=r.interval&&"week"!=r.interval||i.dontRoll||(r.interval="day");var n=i.quoteDriver.getQuoteFeed(r).behavior;n&&n.bufferSize&&(e.moreAvailable&&(a=n.bufferSize),i.isHistoricalMode()&&(s=n.bufferSize))}t.baseline.defaultLevel=e.baseline.actualLevel,t.scroll=Math.max(0,e.dataSet.length-i.tickFromDate(e.endPoints.begin)-a)+1,t.maxTicks=t.scroll-s+1,o.layout.candleWidth=t.width/t.maxTicks}}},this.copyData=function(e){if(e.dataSet){var t=o.chart;t.masterData=o.masterData=e.masterData,t.dataSet=e.dataSet,t.state=e.state,o.draw(),this.drawSlider()}},this.calculateYAxisPosition=function(){var e=o.chart.panel;o.getYAxisCurrentPosition(e.yAxis,e)!=e.yAxis.position&&o.calculateYAxisPositions()},this.drawSlider=function(){if(r.is(":visible")&&i.chart.dataSet&&i.chart.dataSet.length){var e=this.style;e||(e=this.style=i.canvasStyle("stx_range_slider shading"));var t=i.chart.panel,a=o.chart.context,s=o.chart.segmentImage||[],n=o.layout.candleWidth/2,l=o.tickLeft=Math.max(i.tickFromPixel(t.left+n),0),c=o.tickRight=Math.min(i.tickFromPixel(t.right-n),i.chart.dataSet.length-1),d=o.pixelLeft=o.pixelFromTick(l)-(s[l]?s[l].candleWidth/2:n),u=o.pixelRight=o.pixelFromTick(c)+(s[c]?s[c].candleWidth/2:n),m=h.offsetLeft,p=m+h.offsetWidth;a.save(),a.beginPath(),a.fillStyle=e.backgroundColor,a.fillRect(m,h.offsetTop,d-m,h.offsetHeight),a.fillRect(p,h.offsetTop,u-p,h.offsetHeight),a.strokeStyle=e.borderTopColor,a.lineWidth=parseInt(e.borderWidth,10),a.moveTo(d,h.offsetTop),a.lineTo(d,h.offsetTop+h.offsetHeight),a.moveTo(u,h.offsetTop),a.lineTo(u,h.offsetTop+h.offsetHeight),a.stroke(),a.beginPath(),a.lineWidth=parseInt(e.width,10),a.lineCap="round",a.moveTo(d,h.offsetTop+h.offsetHeight/4),a.lineTo(d,h.offsetTop+3*h.offsetHeight/4),a.moveTo(u,h.offsetTop+h.offsetHeight/4),a.lineTo(u,h.offsetTop+3*h.offsetHeight/4),a.stroke(),a.restore()}},i.addEventListener("layout",(function(e){e.stx.slider.acceptLayoutChange(e.stx.layout)})),i.addEventListener("preferences",(function(e){var i=e.stx.preferences.language;t.I18N&&o.preferences.language!=i&&t.I18N.localize(o,i),o.preferences.language=i,o.draw()})),i.addEventListener("symbolChange",(function(e){"master"==e.action&&e.stx.slider.setSymbol(e.symbol)})),i.addEventListener("symbolImport",(function(e){"master"==e.action&&e.stx.slider.setSymbol(e.symbol),e.stx.slider.acceptLayoutChange(e.stx.layout)})),i.addEventListener("theme",(function(e){if(o.clearPixelCache(),o.styles={},o.chart.container.style.backgroundColor="",t.ThemeHelper){var i=new t.ThemeHelper({stx:e.stx});i.params.stx=o,i.update()}})),i.append("createDataSet",(function(){this.slider.adjustRange(this.chart),this.slider.copyData(this.chart)})),i.append("draw",(function(){r.is(":visible")&&o.chart.dataSet&&(this.slider.adjustRange(this.chart),this.slider.calculateYAxisPosition(),o.draw(),this.slider.drawSlider())})),i.prepend("resizeChart",(function(){var e=s.parent(),t=e.parent(),i=(e.height(),s.height(),t.height());t.find(".chartContainer").each((function(){this!==s[0]&&$(this).is(":visible")&&(i-=$(this).parent().outerHeight(!0))})),e.height(i),this.layout.rangeSlider?(r.show(),o.resizeChart(),o.initializeChart(),o.draw(),this.slider.drawSlider()):r.hide()})),$(h).on("mousedown touchstart pointerdown",(function(e){var a=e.offsetX;if(a||0===a||(a=e.originalEvent.layerX),a||0===a){var s=$(o);s.prop("startDrag",a).prop("startPixelLeft",o.pixelLeft).prop("startPixelRight",o.pixelRight);var r=i.slider.style;r||(r=i.slider.style=i.canvasStyle("stx_range_slider shading"));var n=parseInt(r.borderLeftWidth,10);(a+=this.offsetLeft)<o.pixelRight-n&&s.prop("needsLeft",!0),a>o.pixelLeft+n&&s.prop("needsRight",!0),t.touchDevice||e.target.classList.add("stx-drag-chart")}})),$(h).on("mouseup mouseout touchend pointerup",(function(e){e.target.classList.remove("stx-drag-chart");var t=$(o);o.container.style.cursor="ew-resize",t.prop("startDrag",null).prop("needsLeft",!1).prop("needsRight",!1)})),$(h).on("mousemove touchmove pointermove",(function(e){var t=$(o),a=t.prop("startDrag");if(a||0===a){var s=e.originalEvent.touches,r=s&&s.length?o.backOutX(s[0].pageX)-e.target.offsetLeft:e.offsetX;if(r||0===r){o.container.style.cursor="grab",r-=a;var n=o.tickLeft,l=o.tickRight,h=t.prop("startPixelLeft"),c=t.prop("startPixelRight"),d=t.prop("needsLeft"),u=t.prop("needsRight");if(d)h+r<o.chart.left&&(r=o.chart.left-h),u&&c+r>=o.chart.right&&(r=o.chart.right-c,o.isHome()||(r+=o.layout.candleWidth/2)),n=o.tickFromPixel(h+r),u&&(l=n+o.tickRight-o.tickLeft);else{if(!u)return;l=Math.min(o.tickFromPixel(c+r),i.chart.dataSet.length-1)}var m=i.chart.width/(l-n+1);l>=n&&m>=i.minimumCandleWidth&&(o.tickLeft=n,o.tickRight=l,i.chart.scroll=i.chart.dataSet.length-n,d&&u||i.setCandleWidth(m),i.micropixels=0,i.draw())}}})),this.adjustRange(i.chart),this.copyData(i.chart)}},u=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Marker?t.Tooltip=t.Tooltip||function(e){if(t.Marker){var i=e.stx,a=e.ohl,s=e.change,r=e.volume,n=e.series,o=e.studies,l=e.showOverBarOnly,h=e.interpolation,c=e.useDataZone,d=$(i.chart.container).find("stx-hu-tooltip")[0];d||(d=$("<stx-hu-tooltip></stx-hu-tooltip>").appendTo($(i.chart.container))[0]),t.Marker.Tooltip=function(e){this.className||(this.className="CIQ.Marker.Tooltip"),e.label="tooltip",t.Marker.call(this,e)},t.inheritsFrom(t.Marker.Tooltip,t.Marker,!1),t.Marker.Tooltip.sameBar=function(e,t){return!(!e||!t)&&(+e.DT==+t.DT&&(e.Close==t.Close&&(e.Open==t.Open&&e.Volume==t.Volume)))},t.Marker.Tooltip.placementFunction=function(e){for(var i=e.stx,a=0;a<e.arr.length;a++){var s,r,n,o=e.arr[a],h=i.barFromPixel(i.cx),c=i.chart.dataSegment[h],d=!0;if("undefined"!=c&&c&&c.DT&&(s=!0,c.High&&(r=i.pixelFromPrice(c.High)),c.Low&&(n=i.pixelFromPrice(c.Low)),i.chart.highLowBars||c.Close&&(r=i.pixelFromPrice(c.Close)-15,n=i.pixelFromPrice(c.Close)+15),!l||i.cy>=r&&i.cy<=n||(d=!1)),!(i.insideChart&&i.layout.crosshair&&i.displayCrosshairs)||i.openDialog||i.activeDrawing||i.grabbingScreen||!s||!d)return o.node.style.left="-50000px",o.node.style.right="auto",void(o.lastBar={});if(t.Marker.Tooltip.sameBar(i.chart.dataSegment[h],o.lastBar)&&h!=i.chart.dataSegment.length-1)return;o.lastBar=i.chart.dataSegment[h];var u=o.lastBar.candleWidth||i.layout.candleWidth;parseInt(getComputedStyle(o.node).width,10)+i.chart.panel.left+30+u<i.backOutX(t.ChartEngine.crosshairX)?(o.node.style.left="auto",o.node.style.right=Math.round(i.container.clientWidth-i.pixelFromBar(h)+30)+"px"):(o.node.style.left=Math.round(i.pixelFromBar(h)+30)+"px",o.node.style.right="auto");var m=parseInt(getComputedStyle(o.node).height,10),p=Math.round(t.ChartEngine.crosshairY-i.top-m/2);p+m>i.height&&(p=i.height-m),p<0&&(p=0),o.node.style.top=p+"px"}var f=i.overXAxis,v=i.overYAxis;i.overXAxis=i.overYAxis=!1,i.doDisplayCrosshairs(),i.overXAxis=f,i.overYAxis=v},t.ChartEngine.prototype.append("undisplayCrosshairs",(function(){var e=this.huTooltip;if(e&&e.node){var t=$(e.node);t&&t[0]&&(t[0].style.left="-50000px",t[0].style.right="auto",e.lastBar={})}})),t.ChartEngine.prototype.append("deleteHighlighted",(function(){this.huTooltip.lastBar={},this.headsUpHR()})),t.ChartEngine.prototype.append("headsUpHR",u),t.ChartEngine.prototype.append("createDataSegment",u),i.huTooltip=new t.Marker.Tooltip({stx:i,xPositioner:"bar",chartContainer:!0,node:d})}else console.warn("CIQ.Tooltip addon requires CIQ.Marker module to be enabled.");function u(){if(this.huTooltip&&!(i.controls.crossX&&"none"==i.controls.crossX.style.display||i.controls.crossY&&"none"==i.controls.crossY.style.display)){var e=this.barFromPixel(this.cx),l=this.chart.dataSegment[e];if(l){if(!t.Marker.Tooltip.sameBar(l,this.huTooltip.lastBar)||e==this.chart.dataSegment.length-1){var d=$(this.huTooltip.node);d.find("[auto]").remove(),d.find("stx-hu-tooltip-field-value").html();var u=this.chart.panel,m=u.yAxis,p={},f=[];if(f.push({member:"DT",display:"DT",panel:u,yAxis:m}),f.push({member:"Close",display:"Close",panel:u,yAxis:m}),p.DT=p.Close=1,s&&t.ChartEngine.isDailyInterval(this.layout.interval)&&f.push({member:"Change",display:"Change",panel:u,yAxis:m}),a&&(f.push({member:"Open",display:"Open",panel:u,yAxis:m}),f.push({member:"High",display:"High",panel:u,yAxis:m}),f.push({member:"Low",display:"Low",panel:u,yAxis:m}),p.Open=p.High=p.Low=1),r&&(f.push({member:"Volume",display:"Volume",panel:null,yAxis:null}),p.Volume=1),n){var v=this.chart.seriesRenderers;for(var x in v){var g=v[x];if(g!==this.mainSeriesRenderer){u=this.panels[g.params.panel],!(m=g.params.yAxis)&&g.params.shareYAxis&&(m=u.yAxis);for(var y=0;y<g.seriesParams.length;y++){var C=g.seriesParams[y],S=C.symbol,k=C.field;S?k&&S!=k&&(S=t.createObjectChainNames(S,k)[0]):S=k;var b=C.display||C.symbol||C.field;S&&!p[b]&&(f.push({member:S,display:b,panel:u,yAxis:m,isSeries:!0}),p[b]=1)}}}}if(o)for(var w in this.layout.studies){var T=this.layout.studies[w];for(var L in m=(u=this.panels[T.panel])&&T.getYAxis(this),this.layout.studies[w].outputMap)L&&!p[L]&&(f.push({member:L,display:L,panel:u,yAxis:m}),p[L]=1);p[w+"_hist"]||(f.push({member:w+"_hist",display:w+"_hist",panel:u,yAxis:m}),f.push({member:w+"_hist1",display:w+"_hist1",panel:u,yAxis:m}),f.push({member:w+"_hist2",display:w+"_hist2",panel:u,yAxis:m}),p[w+"_hist"]=1)}for(var D=0;D<f.length;D++){var M=f[D],F=M.member,A=M.display,P="DT"==F;!P||c||t.ChartEngine.isDailyInterval(i.layout.interval)||(F="displayDate"),u=M.panel;var E=null;(m=M.yAxis)&&(u&&u===u.chart.panel?(E=Math.max(m.printDecimalPlaces,u.chart.decimalPlaces),(m.maxDecimalPlaces||0===m.maxDecimalPlaces)&&(E=Math.min(E,m.maxDecimalPlaces))):m.decimalPlaces||0===m.decimalPlaces?E=m.decimalPlaces:(m.maxDecimalPlaces||0===m.maxDecimalPlaces)&&(E=m.maxDecimalPlaces));var I=null,R=t.existsInObjectChain(l,F);R?I=R.obj[R.member]:"Change"==F&&(I=l.Close-l.iqPrevClose);var O=A.replace(/^(Result )(.*)/,"$2");if(h&&f[D].isSeries&&null==I){var q=this.valueFromInterpolation(e,O,"Close",u,m);if(null===q)break;I=q}if(!I&&0!==I||!P&&"object"==typeof I&&!I.Close&&0!==I.Close){var H=d.find('stx-hu-tooltip-field[field="'+O+'"]');if(H.length)""!==H.find("stx-hu-tooltip-field-name").html()&&H.find("stx-hu-tooltip-field-value").html("n/a")}else{var Q="";(I.Close||0===I.Close)&&(I=I.Close),I.constructor==Number?Q=m?m.originalPriceFormatter&&m.originalPriceFormatter.func?m.originalPriceFormatter.func(this,u,I,E):m.priceFormatter&&m.priceFormatter!=t.Comparison.priceFormat?m.priceFormatter(this,u,I,E):this.formatYAxisPrice(I,u,E,m):I:I.constructor==Date?P&&this.controls.floatDate&&this.controls.floatDate.innerHTML?Q=this.chart.xAxis.noDraw?"N/A":t.displayableDate(this,u.chart,I):(Q=t.yyyymmdd(I),t.ChartEngine.isDailyInterval(this.layout.interval)||(Q+=" "+I.toTimeString().substr(0,8))):Q=I;var _=d.find('stx-hu-tooltip-field[field="'+O+'"]');if(_.length){_.find("stx-hu-tooltip-field-value").html(Q);var z=_.find("stx-hu-tooltip-field-name");""===z.html()&&z.html(this.translateIf(O))}else $("<stx-hu-tooltip-field auto></stx-hu-tooltip-field>").append($("<stx-hu-tooltip-field-name>"+this.translateIf(O)+"</stx-hu-tooltip-field-name>")).append($("<stx-hu-tooltip-field-value>"+Q+"</stx-hu-tooltip-field-value>")).appendTo(d)}}this.huTooltip.render()}}else this.positionMarkers()}}}:console.error("tooltip addon requires first activating markers feature.")};(a.c||a.c).activateImports(s,r,n,o,l,h,c,d,u,null)}}]);